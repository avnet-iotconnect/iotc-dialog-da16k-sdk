name: Update QUICKSTART.md Revision Info

on:
  push:
    branches:
      - main

jobs:
  update-revision:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v3

    - name: Get Latest Commit Info
      id: commit_info
      run: |
        echo "::set-output name=commit_hash::$(git rev-parse HEAD)"
        echo "::set-output name=commit_date::$(git log -1 --format='%cd' --date=format:'%Y-%m-%d %H:%M:%S')"

    - name: Update QUICKSTART.md
      run: |
        REVISION_INFO="### Revision Info\n\n- **Last Commit Hash**: ${{ steps.commit_info.outputs.commit_hash }}\n- **Last Commit Date**: ${{ steps.commit_info.outputs.commit_date }}\n\n"
        sed -i "1s|^|$REVISION_INFO|" doc/QUICKSTART.md

    - name: Commit Changes
      run: |
        git config --global user.name 'github-actions[bot]'
        git config --global user.email 'github-actions[bot]@users.noreply.github.com'
        git add doc/QUICKSTART.md
        git commit -m "Update QUICKSTART.md with revision info"
        git push
